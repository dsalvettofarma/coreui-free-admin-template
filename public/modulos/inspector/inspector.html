<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Inspector de pagos</title>
  <link rel="stylesheet" href="../dashboard.css">
  <link rel="stylesheet" href="inspector.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/tabler-icons.min.css">
</head>
<body>
  <div id="layout-header"></div>
  <div class="layout">
    <div id="layout-sidebar"></div>
    <main id="main-content" class="main-content inspector-root">
      <div id="overlay-spinner" class="overlay-spinner" style="display:none;">
        <div class="spinner-container">
          <div class="spinner"></div>
          <div id="overlay-text" class="overlay-text">Cargando…</div>
        </div>
      </div>
      <div class="inspector-card">
        <div class="header">
          <h2>
            Inspector de pagos
            <img src="https://i.pinimg.com/originals/29/94/3d/29943dea02925e3b1f046cee1b53a682.png" alt="Ícono" style="width: 50px; height: 50px; vertical-align: middle;">
          </h2>
          <div class="links">
            <a href="../inspector/docs.html" target="_blank" class="btn-ayuda-simple" title="Ver guía del Inspector de Pagos">
              <i class="ti ti-help-circle" style="font-size: 1.2em;"></i> Documentación
            </a>
            <a href="https://docs.google.com/spreadsheets/d/1SBniJctF3j2nMt4M1IQWFkvjsKhCqJ_h6kqEtcvGdsg/edit" id="sheet-link" class="sheet-button" target="_blank" rel="noopener noreferrer">
              <i class="fas fa-external-link-alt"></i> 📄 Ver hoja
            </a>
          </div>
        </div>
        <div class="acciones">
          <p class="mensaje-info">Recordá precargar la hoja. El filtro de fecha se aplica sobre la hoja seleccionada. Los filtros de texto se aplican después del filtro de fecha.</p> 
          <button id="btnRefrescarHojas">🔁 Refrescar hojas</button>
          <button id="btnPrecargar">🔄 Precargar hoja</button>
          <button id="btnMostrarUltimo">🕒 Último registro</button>
          <button id="btnAnulados">🧾 Pagos anulados</button>
          <button id="btnRechazados">📊 Pagos rechazados</button>
          <button id="btnBuscar" class="button-buscar">🔍 Buscar</button>
        </div>
        <div class="container">
          <div>
            <label for="sheet">Hoja:</label>
            <select id="sheet"></select>
          </div>
          <div>
            <label for="column">Columna:</label> <select id="column"></select>
          </div>
          <div>
            <label for="value-input">Valor:</label> <input id="value-input" placeholder="CI, Nombre, Email...">
          </div>
          <div>
            <label for="match-select">Tipo búsqueda:</label> <select id="match-select">
              <option value="contains">Contiene</option>
              <option value="exact">Exacta</option>
            </select>
          </div>
          <div>
            <label for="fecha-desde">Fecha desde:</label>
            <input type="date" id="fecha-desde" name="fecha-desde">
          </div>
          <div>
            <label for="fecha-hasta">Fecha hasta:</label>
            <input type="date" id="fecha-hasta" name="fecha-hasta">
          </div>
          <div>
            <button id="btnLimpiarFiltroFechas">🧹 Limpiar fechas</button>
          </div>
          <div>
            <label for="canal">Canal de venta:</label>
            <select id="canal">
              <option value="">Todos</option>
              <option value="FARMASHOP">Web</option>
              <option value="FARMASHOP_APP">App</option>
            </select>
          </div>
          <div>
            <label for="comercio">Comercio:</label>
            <select id="comercio">
              <option value="">Todos</option>
              <!-- Opciones dinámicas si lo deseas -->
            </select>
          </div>
        </div>
        <div id="estado" class="mensaje-estado"></div>
      </div>
      <div class="inspector-table-container">
        <table id="results"></table>
      </div>
    </main>
  </div>
  <script type="module">
    import { loadLayout } from '../shared/layout.js';
    loadLayout();
    // Código específico del módulo
  </script>
  <script type="module" src="inspector.js"></script>
</body>
</html>